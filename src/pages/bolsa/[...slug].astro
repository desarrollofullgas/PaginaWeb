---
import Parallax from "../../components/Parallax.astro";
import { jobs } from "../../constants/jobs";
import Clock from "../../icons/Clock.astro";
import Dollar from "../../icons/Dollar.astro";
import Map from "../../icons/Map.astro";
import Layout from "../../layouts/Layout.astro";
import DetailsContainer from "../../components/DetailsContainer.astro"
import DetailElement from "../../components/DetailElement.astro"
import ArrowLeft from "../../icons/ArrowLeft.astro";
//debido a que usamos SSR, esta es la forma para crear páginas dinámicas según la documentación
const trabajos=jobs.map((job,index)=>({slug:index.toString(),...job}));

const {slug} = Astro.params;
const page = trabajos.find((page) => page.slug === slug);
if (!page) return Astro.redirect("/404");
---
<Layout title="Fullgas - Información de puesto">
    <section class="mt-3">
        <Parallax bg="/src/img/backgrounds/bg03.jpg">
            <article class="max-w-7xl m-auto py-2 flex flex-col gap-12">
                <div class="flex items-end gap-1">
                    <a href="/bolsa/" class="text-sky-500 font-semibold text-lg flex gap-1 items-center hover:text-sky-600 transition-colors duration-300"><ArrowLeft clases="size-5"/> Vacantes/</a>
                    <span class="text-slate-200">{page.tittle}</span>
                </div>
                <div class="flex flex-col gap-6 my-10">
                    <h1 class="text-red-500 text-6xl sm:text-8xl font-semibold">{page.tittle}</h1>
                    <div class="mt-2 flex flex-wrap sm:flex-nowrap items-center gap-4 text-amber-500 font-medium">
                        <div class="flex gap-2 items-center">
                            <Map clases="size-6"/>
                            <span class="">{page.location}</span>
                        </div>
                        <div class="flex gap-2 items-center">
                            <Clock clases="size-6"/>
                            <span>{page.type}</span>
                        </div>
                        <div class="flex gap-2 items-center">
                            <Dollar clases="size-6"/>
                            <span>${page.salary} mensual</span>
                        </div>
                    </div>
                </div>
            </article>
        </Parallax>
        <article class="max-w-7xl m-auto text-pretty text-slate-300 p-2">
            <div class="my-4 flex flex-col gap-3">
                <p class="leading-7">{page.description}</p>
                <div>
                    <h3 class="font-medium text-amber-500 mb-2">Habilidades requeridas:</h3>
                    <DetailsContainer>
                        {page.skills.map(skill=>(<DetailElement text={skill}/>))}
                    </DetailsContainer>
                </div>
                {page.extraSkills.length>0&&(<div>
                    <h3 class="font-medium text-amber-500 mb-2">Es un PLUS tener:</h3>
                    <DetailsContainer>
                        {page.extraSkills.map(skill=>(<DetailElement text={skill}/>))}
                    </DetailsContainer>
                </div>)}
                {page.coment!==''&&(<p>{page.coment}</p>)}
                <form action="mailto:recipient@example.com" method="post" enctype="text/plain" class="mt-4 flex justify-center">
                    <button class="px-4 py-2 font-medium text-lg rounded-lg bg-sky-700 text-sky-200 hover:bg-sky-600 transition-colors duration-300">Aplicar a la vacante</button>
                </form>
            </div>
        </article>
    </section>
</Layout>